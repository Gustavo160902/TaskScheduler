; PlatformIO Project Configuration File
;
; TaskScheduler Example 30: _TASK_THREAD_SAFE
;
; This example demonstrates the use of _TASK_THREAD_SAFE compile option
; for safe interaction with TaskScheduler from multiple threads and ISRs.
;
; Demonstrates:
; - FreeRTOS queue implementation for request handling
; - Safe task control from ISR context
; - Safe task control from worker threads
; - StatusRequest signaling from interrupts
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[platformio]
default_envs = esp32dev

[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino

[env]
lib_deps =
    arkhipenko/TaskScheduler @ ^4.0.0

build_flags =
    ; Core thread safety features
    -D _TASK_THREAD_SAFE         ; Enable thread-safe operations
    -D _TASK_HEADER_AND_CPP      ; Enable CPP compilation

    ; Supporting features
    -D _TASK_STATUS_REQUEST      ; Enable StatusRequest support
    -D _TASK_TIMEOUT             ; Enable timeout support
    -D _TASK_TIMECRITICAL        ; Enable timing diagnostics
    -D _TASK_ISR_SUPPORT         ; Enable ISR-safe methods (ESP only)

    ; Debug options
    -D _DEBUG_

monitor_speed = 115200
upload_speed = 921600
